{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst worker_1 = require(\"./worker\");\nclass CustomWorkers {\n  constructor() {\n    this.ticker = {};\n    this.list = [];\n    this.workers = {};\n    this.workersPromises = [];\n    //nothing\n  }\n  ready() {\n    return __awaiter(this, void 0, void 0, function* () {\n      return Promise.all(this.workersPromises);\n    });\n  }\n  addCurrency(base, quote, getter, interval) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (typeof base !== \"string\" || typeof quote !== \"string\" || !worker_1.initialCoinList.fiat.includes(quote)) {\n        throw new Error(\"Invalid currency pair.\");\n      }\n      if (typeof getter !== \"function\") {\n        throw new Error(\"No function specified.\");\n      }\n      base = base.toUpperCase(), quote = quote.toUpperCase();\n      if (this.ticker[base + quote] || this.ticker[quote + base] || this.list.indexOf(base) != -1) {\n        console.warn(`This custom currency already exists, it will be overriden.`);\n        this.removeCurrency(base);\n      }\n      this.list.push(base);\n      if (interval) {\n        if (typeof interval !== \"number\") {\n          throw new Error(\"Invalid interval specfied.\");\n        }\n        this.workers[base + quote] = setInterval(() => {\n          return Promise.resolve(getter()).then(value => {\n            this.ticker[base + quote] = Number(value);\n          });\n        }, interval);\n      }\n      const currentPromise = Promise.resolve(getter()).then(value => {\n        this.ticker[base + quote] = Number(value);\n      });\n      this.workersPromises.push(currentPromise);\n      return currentPromise;\n    });\n  }\n  removeCurrency(base, quote) {\n    base = base.toUpperCase(), quote = quote ? quote.toUpperCase() : '';\n    for (const worker in this.workers) {\n      if (worker.includes(base + quote)) {\n        clearInterval(this.workers[worker]);\n        delete this.ticker[worker];\n      }\n    }\n    this.list = this.list.filter(v => v !== base);\n  }\n}\nexports.default = CustomWorkers;","map":{"version":3,"names":["require","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","worker_1","CustomWorkers","constructor","ticker","list","workers","workersPromises","ready","all","addCurrency","base","quote","getter","interval","initialCoinList","fiat","includes","Error","toUpperCase","indexOf","console","warn","removeCurrency","push","setInterval","Number","currentPromise","worker","clearInterval","filter","v","default"],"sources":["/home/homesasha/Python_Fullstack/Vue.js/crypto_exchange/node_modules/crypto-convert/dist/custom.js"],"sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst worker_1 = require(\"./worker\");\r\nclass CustomWorkers {\r\n    constructor() {\r\n        this.ticker = {};\r\n        this.list = [];\r\n        this.workers = {};\r\n        this.workersPromises = [];\r\n        //nothing\r\n    }\r\n    ready() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.all(this.workersPromises);\r\n        });\r\n    }\r\n    addCurrency(base, quote, getter, interval) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof base !== \"string\" || typeof quote !== \"string\" || !worker_1.initialCoinList.fiat.includes(quote)) {\r\n                throw new Error(\"Invalid currency pair.\");\r\n            }\r\n            if (typeof getter !== \"function\") {\r\n                throw new Error(\"No function specified.\");\r\n            }\r\n            base = base.toUpperCase(),\r\n                quote = quote.toUpperCase();\r\n            if (this.ticker[base + quote] || this.ticker[quote + base] || this.list.indexOf(base) != -1) {\r\n                console.warn(`This custom currency already exists, it will be overriden.`);\r\n                this.removeCurrency(base);\r\n            }\r\n            this.list.push(base);\r\n            if (interval) {\r\n                if (typeof interval !== \"number\") {\r\n                    throw new Error(\"Invalid interval specfied.\");\r\n                }\r\n                this.workers[base + quote] = setInterval(() => {\r\n                    return Promise.resolve(getter())\r\n                        .then((value) => {\r\n                        this.ticker[base + quote] = Number(value);\r\n                    });\r\n                }, interval);\r\n            }\r\n            const currentPromise = Promise.resolve(getter())\r\n                .then((value) => {\r\n                this.ticker[base + quote] = Number(value);\r\n            });\r\n            this.workersPromises.push(currentPromise);\r\n            return currentPromise;\r\n        });\r\n    }\r\n    removeCurrency(base, quote) {\r\n        base = base.toUpperCase(),\r\n            quote = quote ? quote.toUpperCase() : '';\r\n        for (const worker in this.workers) {\r\n            if (worker.includes(base + quote)) {\r\n                clearInterval(this.workers[worker]);\r\n                delete this.ticker[worker];\r\n            }\r\n        }\r\n        this.list = this.list.filter((v) => v !== base);\r\n    }\r\n}\r\nexports.default = CustomWorkers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}